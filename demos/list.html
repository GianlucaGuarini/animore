<!DOCTYPE html>
<html>

  <head>
    <link rel="stylesheet" href="style.css">
    <script src="../animore.js"></script>
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
      }
      ul {
        font: normal 18px Helvetica, Arial;
      }
      ul li {
        padding: 10px;
      }
    </style>
  </head>

  <body>
    <ul>
      <li>
        Matt
      </li>
      <li>
        Sara
      </li>
      <li>
        John
      </li>
      <li>
        Janet
      </li>
    </ul>
    <div>
      <button class='shuffle'>shuffle</button>
      <button class='add'>add</button>
    </div>
    <script>
      const lis = animore('li', {
        duration: 300
      })

      const names = ['Jack', 'Laura', 'Amanda', 'Michael', 'Rob', 'Julia']

      const shuffle = document.querySelector('.shuffle')
      const add = document.querySelector('.add')
      const ul = document.querySelector('ul')
      shuffle.addEventListener('click', function() {
        // update the DOM nodes position
        lis.reverse().map((li) => {
          ul.append(li.el)
          return li.apply
        }).forEach(fn => fn()) // run the flip animations
      })

      add.addEventListener('click', function() {
        const li = document.createElement('li')
        li.innerHTML = names[~~(Math.random() * names.length)]
        ul.insertBefore(li, ul.children[~~(ul.children.length * Math.random())])
        lis.push(animore(li)[0])
        lis.forEach(l => l.apply())
      })
    </script>
  </body>

</html>